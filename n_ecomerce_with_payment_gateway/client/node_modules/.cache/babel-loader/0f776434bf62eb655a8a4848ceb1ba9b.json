{"ast":null,"code":"import _regeneratorRuntime from\"/home/rajnishyadav/Downloads/React/n_ecomerce_with_payment_gateway/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/home/rajnishyadav/Downloads/React/n_ecomerce_with_payment_gateway/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/home/rajnishyadav/Downloads/React/n_ecomerce_with_payment_gateway/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{React,useState,useEffect}from'react';import{useSelector,useDispatch}from\"react-redux\";import{decNum,deleteCartData,increaseQty,decreaseQty}from\"../redux/actions/index\";import axios from\"axios\";import{useNavigate}from'react-router-dom';import\"./CSS/cart.css\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Cart(){var myState=useSelector(function(state){return state;});var dispatch=useDispatch();var _useState=useState(0),_useState2=_slicedToArray(_useState,2),amount=_useState2[0],setAmount=_useState2[1];var navigate=useNavigate();function handleCheckout(){return _handleCheckout.apply(this,arguments);}function _handleCheckout(){_handleCheckout=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var qty,price,totalPriceOfEachItem,i,total,_i;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:qty=myState.cartData.rj.map(function(d){return d.qty;});price=myState.cartData.rj.map(function(d){return d.price;});totalPriceOfEachItem=[];for(i=0;i<qty.length;i++){totalPriceOfEachItem[i]=qty[i]*price[i];}total=0;for(_i=0;_i<totalPriceOfEachItem.length;_i++){total=total+totalPriceOfEachItem[_i];}total=Math.floor(total);_context2.next=9;return setAmount(total);case 9:case\"end\":return _context2.stop();}}},_callee2);}));return _handleCheckout.apply(this,arguments);}useEffect(function(){handleCheckout();// eslint-disable-next-line\n},[myState]);var checkoutHandler=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$axios$get,key,_yield$axios$post,order,options,razor;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return axios.get(\"http://localhost:4000/api/getkey\");case 3:_yield$axios$get=_context.sent;key=_yield$axios$get.data.key;_context.next=7;return axios.post(\"http://localhost:4000/api/checkout\",{amount:amount});case 7:_yield$axios$post=_context.sent;order=_yield$axios$post.data.order;options={key:key,// Enter the Key ID generated from the Dashboard\namount:order.amount,// Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise\ncurrency:\"INR\",name:\"Frost Software Private Ltd.\",description:\"Test Transaction\",image:\"https://avatars.githubusercontent.com/u/89183490?s=400&u=23842d1ac14138d25e8771096739851360f54243&v=4\",order_id:order.id,//This is a sample Order ID. Pass the `id` obtained in the response of Step 1\ncallback_url:\"http://localhost:4000/api/paymentVerification\",prefill:{name:\"Gaurav Kumar\",email:\"gaurav.kumar@example.com\",contact:\"9999999999\"},notes:{address:\"Razorpay Corporate Office\"},theme:{color:\"#121212\"}};razor=new window.Razorpay(options);razor.open();_context.next=17;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](0);navigate(\"/servernotres\");case 17:case\"end\":return _context.stop();}}},_callee,null,[[0,14]]);}));return function checkoutHandler(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{style:{height:\"100%\",width:\"94%\",marginBottom:\"31.5%\"},children:myState.cartData.rj.length===0?/*#__PURE__*/_jsx(\"h1\",{style:{textAlign:\"center\"},children:\"No Items In Cart\"}):/*#__PURE__*/_jsxs(\"div\",{children:[myState.cartData.rj.map(function(d,i){return/*#__PURE__*/_jsxs(\"div\",{style:{marginLeft:\"3%\",marginTop:\"1%\",display:\"flex\"},children:[/*#__PURE__*/_jsx(\"img\",{src:d.image,alt:\"noImage\",style:{height:\"500px\",width:\"500px\"}}),/*#__PURE__*/_jsxs(\"div\",{style:{width:\"20%\",marginLeft:\"30%\"},children:[/*#__PURE__*/_jsx(\"h1\",{style:{marginTop:\"5%\"},children:d.title}),/*#__PURE__*/_jsx(\"p\",{children:d.description}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Category : \",d.category]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price \\u20B9\",d.price,\"  \"]}),/*#__PURE__*/_jsxs(\"div\",{style:{display:\"flex\",flexDirection:\"row\"},children:[/*#__PURE__*/_jsx(\"h2\",{className:\"hover\",onClick:function onClick(){return dispatch(decreaseQty(d));},style:{width:\"28px\",textAlign:\"center\",borderRadius:\"50px\",backgroundColor:\"rgb(0,185,185)\",color:\"white\"},children:\"-\"}),/*#__PURE__*/_jsx(\"h2\",{style:{marginLeft:\"1%\",marginRight:\"1%\"},children:d.qty}),/*#__PURE__*/_jsx(\"h2\",{className:\"hover\",onClick:function onClick(){return dispatch(increaseQty(d));},style:{width:\"28px\",textAlign:\"center\",borderRadius:\"50px\",backgroundColor:\"rgb(0,185,185)\",color:\"white\"},children:\"+\"})]}),/*#__PURE__*/_jsxs(\"h2\",{children:[\" \\u20B9\",d.price*d.qty]}),/*#__PURE__*/_jsx(\"button\",{className:\"hover\",style:{backgroundColor:\"red\",color:\"white\",border:\"none\",fontSize:\"15px\",padding:\"5px\",borderRadius:\"10px\"},onClick:function onClick(){dispatch(deleteCartData(d.id));dispatch(decNum());},children:\"Delete\"})]})]},i);}),/*#__PURE__*/_jsxs(\"h1\",{style:{textAlign:\"center\"},children:[\"Total =  \\u20B9\",amount]}),/*#__PURE__*/_jsx(\"button\",{className:\"hover\",onClick:checkoutHandler,style:{display:\"block\",margin:\"auto\",border:\"none\",backgroundColor:\"green\",color:\"white\",borderRadius:\"10px\",fontSize:\"15px\",padding:\"5px\"},children:\"Check Out\"})]})});}","map":{"version":3,"names":["React","useState","useEffect","useSelector","useDispatch","decNum","deleteCartData","increaseQty","decreaseQty","axios","useNavigate","Cart","myState","state","dispatch","amount","setAmount","navigate","handleCheckout","qty","cartData","rj","map","d","price","totalPriceOfEachItem","i","length","total","Math","floor","checkoutHandler","get","key","data","post","order","options","currency","name","description","image","order_id","id","callback_url","prefill","email","contact","notes","address","theme","color","razor","window","Razorpay","open","height","width","marginBottom","textAlign","marginLeft","marginTop","display","title","category","flexDirection","borderRadius","backgroundColor","marginRight","border","fontSize","padding","margin"],"sources":["/home/rajnishyadav/Downloads/React/n_ecomerce_with_payment_gateway/client/src/components/Cart.jsx"],"sourcesContent":["import {React , useState , useEffect} from 'react';\nimport { useSelector , useDispatch} from \"react-redux\";\nimport {decNum, deleteCartData , increaseQty ,decreaseQty} from \"../redux/actions/index\";\nimport axios from \"axios\";\nimport { useNavigate } from 'react-router-dom';\nimport \"./CSS/cart.css\"\n\n\nexport default function Cart() {\n    const myState = useSelector((state) => state);\n    const dispatch = useDispatch();\n    const [amount, setAmount] = useState(0);\n    const navigate = useNavigate();\n    \n    async function handleCheckout(){\n      let qty =  myState.cartData.rj.map(d=>d.qty);\n      let price = myState.cartData.rj.map(d=>d.price);\n      let totalPriceOfEachItem = [] ; \n      for(let i=0;i<qty.length;i++){\n        totalPriceOfEachItem[i]=qty[i]*price[i];\n      }\n      let total = 0 ;\n      for(let i=0;i<totalPriceOfEachItem.length;i++){\n        total = total + totalPriceOfEachItem[i];\n      }\n      total = Math.floor(total);\n        await setAmount(total);\n    \n    }\n    \n    useEffect(() => {\n      handleCheckout();\n      // eslint-disable-next-line\n    }, [myState]);\n\n    const checkoutHandler = async() => {\n      try{\n      const {data:{key}} =await axios.get(\"http://localhost:4000/api/getkey\")\n\n      const {data : {order}} = await axios.post(\"http://localhost:4000/api/checkout\", {amount})\n  \n\n  const options = {\n      key, // Enter the Key ID generated from the Dashboard\n      amount: order.amount, // Amount is in currency subunits. Default currency is INR. Hence, 50000 refers to 50000 paise\n      currency: \"INR\",\n      name: \"Frost Software Private Ltd.\",\n      description: \"Test Transaction\",\n      image: \"https://avatars.githubusercontent.com/u/89183490?s=400&u=23842d1ac14138d25e8771096739851360f54243&v=4\",\n      order_id: order.id, //This is a sample Order ID. Pass the `id` obtained in the response of Step 1\n      callback_url: \"http://localhost:4000/api/paymentVerification\",\n      prefill: {\n          name: \"Gaurav Kumar\",\n          email: \"gaurav.kumar@example.com\",\n          contact: \"9999999999\"\n      },\n      notes: {\n          address: \"Razorpay Corporate Office\"\n      },\n      theme: {\n          color: \"#121212\"\n      }\n  };\n  const razor = new window.Razorpay(options);\n  razor.open(); \n}\ncatch(err){\n navigate(\"/servernotres\")\n}\n  \n}\n    \n  \n    \n    return (\n        <div style={{height: \"100%\",width: \"94%\" , marginBottom : \"31.5%\"}}>\n        {\n          myState.cartData.rj.length === 0 ? <h1 style={{textAlign : \"center\"}}>No Items In Cart</h1>:\n          <div>{\n            myState.cartData.rj.map((d,i)=>{\n                return(\n              <div key={i} style={{marginLeft : \"3%\" , marginTop : \"1%\" , display : \"flex\"}}>\n                <img  src={d.image} alt=\"noImage\" style={{ height: \"500px\", width: \"500px\"}} />\n                <div style={{width:\"20%\"  , marginLeft: \"30%\"}}>\n                <h1 style={{marginTop : \"5%\"}}>{d.title}</h1>\n                <p>{d.description}</p>\n                <p>Category : {d.category}</p>\n                <p>Price ₹{d.price}  </p>\n                <div style={{display : \"flex\" , flexDirection : \"row\"}}>\n                <h2 className='hover' onClick={()=>dispatch(decreaseQty(d))} style={{ width : \"28px\" , textAlign : \"center\" , borderRadius : \"50px\" , backgroundColor : \"rgb(0,185,185)\" , color : \"white\"}}>-</h2>\n                <h2 style={ {marginLeft : \"1%\" , marginRight : \"1%\"}}>{d.qty}</h2>\n                <h2 className='hover' onClick={()=>dispatch(increaseQty(d))} style={{ width : \"28px\" , textAlign : \"center\" , borderRadius : \"50px\" , backgroundColor : \"rgb(0,185,185)\" , color : \"white\"}}>+</h2>\n                </div>\n                <h2> ₹{d.price*d.qty}</h2>\n                <button className='hover' style={{backgroundColor : \"red\" , color : \"white\" , border : \"none\" , fontSize : \"15px\" , padding  : \"5px\" , borderRadius : \"10px\"}} onClick={()=>{dispatch(deleteCartData(d.id));dispatch(decNum())}}>Delete</button>\n                </div>\n              </div>\n            )\n          })}\n          <h1 style={{textAlign : \"center\"}}>Total =  ₹{amount}</h1>\n        <button className='hover' onClick={checkoutHandler} style={{ display : \"block\" , margin : \"auto\" , border : \"none\" , backgroundColor : \"green\" , color : \"white\" , borderRadius : \"10px\" , fontSize : \"15px\" , padding  : \"5px\" }}>Check Out</button>\n        </div>\n        }\n         </div>\n  )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}